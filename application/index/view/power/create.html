<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>动态首页</title>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/zTree/css/zTreeStyle/zTreeStyle.css" type="text/css">
    <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
    <!--<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">-->
    <script src="/static/js/jquery-1.11.3.min.js" type="text/javascript"></script>    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/static/zTree/js/jquery.ztree.core.js"></script>
</head>
<body>

<form action="{:url('@index/power/create');}" method="POST">


    <div class="form-group">
        <label  class="col-sm-2 control-label">权限名</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" placeholder="登录名" name="power_name" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">路由</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" placeholder="密码" name="route"/>
        </div>
    </div>

    <div class="form-group row">
        <label class="col-lg-2">上级分类</label>
        <div class="col-lg-10">
            <input type="text" name="parent_name" class="form-control" />
            <input type="hidden" name="parent_id" />
            <div class="zTreeDemoBackground left">
                <ul id="treeDemo" class="ztree"></ul>
            </div>
        </div>
    </div>

    <div class="form-group">
        <div class="zTreeDemoBackground left">
            <ul id="treeDemo" class="ztree"></ul>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-default">Sign in</button>
        </div>
    </div>

</form>

<script>
    var setting = {
        data:{
            // id pId name open
            // 数据表对应的字段名
            key: {
                pId: 'pid'
//                    title: 'name'
            },
            // 使用简单数据模型
            simpleData: {
                enable: true
            }
        },
        callback:{
            beforeClick: function(treeId, treeNode, clickFlag){
                // treeId是装节点的元素的id属性
                var _id = treeNode.id;
                var _name =treeNode.name;
                $('input[name="parent_name"]').val(_name);
                $('input[name="parent_id"]').val(_id);
                console.log(treeNode)
            },
            onClick: function(event, treeId, treeNode, clickFlag){
//                    alert(treeId)
            }
        }
    };
    var zNodes = {$rows};
    var _oneCate = {
        id: -1,
        name: '一级分类',
        pId: 0
    };
    zNodes.unshift(_oneCate);
    $(function(){
        $.fn.zTree.init($("#treeDemo"), setting, zNodes);
    });
</script>
</body>
</html>